"use strict";var vaaCalcs=new function(){this.hybrid=function(t,r,e,n){var a=[];a[0]=new Array(1,.5,0,-.5,-1),a[1]=new Array(.5,.625,.25,-.125,-.5),a[2]=new Array(0,.25,.5,.25,0),a[3]=new Array(-.5,-.125,.25,.625,.5),a[4]=new Array(-1,-.5,0,.5,1);for(var i=0,l=0,d=0;d<t.length;d++)t[d]===n||0===e[d]||t[d]<0||r[d]<0||(r[d]!==n?(i+=a[t[d]-1][r[d]-1]*e[d],l++):l++);return Math.round(parseFloat(i/l*100))},this.cityBlock=function(t,r,e,n){var a=[];a[0]=new Array(1,.5,0,-.5,-1),a[1]=new Array(.5,1,.5,0,-.5),a[2]=new Array(0,.5,1,.5,0),a[3]=new Array(-.5,0,.5,1,.5),a[4]=new Array(-1,-.5,0,.5,1);for(var i=0,l=0,d=0;d<t.length;d++)t[d]===n||0===e[d]||t[d]<0||r[d]<0||(r[d]!==n?(i+=a[t[d]-1][r[d]-1]*e[d],l++):l++);return Math.round(parseFloat(i/l*100))},this.euclidean=function(t,r,e,n){for(var a=0,i=0,l=0;l<t.length;l++)t[l]===n||0===e[l]||t[l]<0||r[l]<0||(r[l]!==n?(a+=(t[l]-r[l])*(t[l]-r[l])*e[l],i++):i++);return a/=i,a=Math.sqrt(a),Math.round(parseFloat(Math.abs((4-a)/4*100)))},this.xyzPlacements=function(t,r,e,n,a){for(var i,l,d=[],s=[],o=0;o<a.length;o++)d[o]=0,s[o]=0;for(o=0;o<t.length;o++)t[o]>=0&&t[o]!==n&&("-"===r[o].charAt(0)?(i=r[o].substring(1),l=a.indexOf(i),l>=0&&(d[l]+=-1*e[t[o]-1])):(i=r[o],l=a.indexOf(i),l>=0&&(d[l]+=e[t[o]-1])),s[l]++);for(o=0;o<a.length;o++)d[o]=d[o]/s[o],d[o]=parseFloat((100*d[o]).toFixed(1));return d}},chart=function(t,r){var e=function(t){return Math.abs(t)},n=d3.select(t).append("div").style("position","relative").attr("class","barChartArea"),a=n.selectAll(".bar").data(r).enter().append("div").attr("class","row").attr("match",function(t){return t.hybrid<0?"negative":t.hybrid>40?"high":"weak"}),i=a.append("div").style("padding-right",0).attr("class","left-area col-md-5 col-lg-5 col-sm-5 col-xs-5"),l=a.append("div").style("padding-right",0).style("padding-left",0).attr("class","midlle-area col-md-2 col-lg-2 col-sm-2 col-xs-2"),d=a.append("div").style("padding-left",0).attr("class","right-area col-md-5 col-lg-5 col-sm-5 col-xs-5");return i.append("div").attr("class","bar negative pull-right").style("overflow","hidden").style("border","1px solid transparent").style("text-align","left").style("padding-left","2px").style("width",function(t){return e(t.hybrid)+"%"}).style("display",function(t){return t.hybrid<0?"block":"none"}).append("h4").text(function(t){return t.hybrid}),l.append("div").attr("title",function(t){return t.name}).style("border","1px solid transparent").style("background-image",function(t){return"url("+t.logo+")"}).style("background-size","contain").style("background-repeat","no-repeat").style("background-position","center").append("h4").style("height","19px").style("visibility","hidden"),d.append("div").attr("class",function(t){return t.hybrid<0?"bar negative":t.hybrid>40?"bar high":"bar weak"}).style("overflow","hidden").style("border","1px solid transparent").style("text-align","right").style("padding-right","2px").style("width",function(t){return e(t.hybrid)+"%"}).style("display",function(t){return t.hybrid>=0?"block":"none"}).append("h4").text(function(t){return t.hybrid}),n};
